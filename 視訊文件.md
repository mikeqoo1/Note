# 在樹莓派上使用 USB Webcam 做串流影音

## 架構圖&關鍵字

```
Gstreamer
janus-gateway
gst-omx
```

![架構圖](視訊架構圖.png)

## 安裝Gstream

```
sudo apt-get install libgstreamer1.0-0 gstreamer1.0-plugins-base gstreamer1.0-plugins-good gstreamer1.0-plugins-bad gstreamer1.0-plugins-ugly gstreamer1.0-libav gstreamer1.0-doc gstreamer1.0-tools gstreamer1.0-x gstreamer1.0-alsa gstreamer1.0-gl gstreamer1.0-gtk3 gstreamer1.0-qt5 gstreamer1.0-pulseaudio

sudo apt-get install gstreamer1.0-tools
sudo apt-get install gstreamer1.0-plugins-good
sudo apt-get install gstreamer1.0-omx
```

## 安裝Janus-Gateway

基本上按照這篇, 可以成功使用, 有時間, 我會補上我碰到的問題, 和處理方法

- https://blog.csdn.net/newchenxf/article/details/110451532


## 建立串流平台

```
gst-launch-1.0 -v v4l2src device=/dev/video0 ! videoconvert ! videoscale ! 'video/x-raw, width=800, height=600, framerate=30/1' ! queue ! omxh264enc ! h264parse ! rtph264pay config-interval=1 pt=100 ! udpsink host=127.0.0.1 port=5004

gst-launch-1.0 -v v4l2src device=/dev/video0 ! videoconvert ! videoscale ! 'video/x-raw, width=1920, height=1080, framerate=30/1' ! queue ! omxh264enc ! h264parse ! flvmux ! rtmpsink location='rtmp://192.168.88.181:1935/demo/test live=1'
```